<body class="fixed-nav sticky-footer bg-dark" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#"></a>
        </li>
        <li>Creation du projet</li>
      </ol>
      <h1 style="text-align: center;">Fonctionnalités</h1>
      <br>

      <form (ngSubmit)="onSubmit(ff)" #ff="ngForm">
        <div class="row2 col-xl-4 col-sm-8 mb-42" class="active">
          <div class="card-header" style="background-color: rgb(180,180,180);"><strong>Fonctionnalités</strong></div>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Description</th>
                <th>Libelle</th>
                <th>Objectifs</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>

              <tr *ngFor="let field2 of fonctionFields; let i = index">
                <td>
                  <input [(ngModel)]="field2.FonctionnaliteLibelle" [ngModelOptions]="{standalone: true}" class="form-control" type="text" name="{{field2.FonctionnaliteLibelle}}" />
                </td>
                <td>
                  <input [(ngModel)]="field2.FonctionnaliteDescription" [ngModelOptions]="{standalone: true}" class="form-control" type="text" name="{{field2.FonctionnaliteDescription}}" />
                </td>
                <td>
                  <div class="dropdown" dropdown is-open="myNavDropdown.isopen">
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" >
                      Objectifs Associés
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li class="dropdown-item" *ngFor="let item of objectifsFields" (click)="$event.stopPropagation()">{{ item.ObjectifLibelle }}</li>
                    </ul>
                  </div>
                </td>
                <td>
                  <button class="btn btn-danger mb-2"  type="button" (click)="deleteFieldValueFonc(i, fonctionFields, field2.id)">-</button>
                </td>
              </tr>

              <tr>
                <td>
                  <input class="form-control" type="text" id="newAttributeCode" [(ngModel)]="newAttribute.FonctionnaliteLibelle" name="newLibelleFonc" />
                </td>
                <td>
                  <input class="form-control" type="text" id="newAttributePrice" [(ngModel)]="newAttribute.FonctionnaliteDescription" name="newDescriptionFonc" />
                </td>
                <td>
                  <div class="dropdown" dropdown is-open="myNavDropdown.isopen">
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" >
                      Objectifs Associés
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li class="dropdown-item" *ngFor="let item of objectifsFields" (click)="$event.stopPropagation()">
                        <div class="form-check form-check-inline">
                          <label class="form-check-label" for="{{ i }} + {{ item.ObjectifLibelle }}"><input class="form-check-input" type="checkbox" value="{{ item.id }}" id="{{ i }} + {{ item.ObjectifLibelle }}" (change)="changeObj($event, item, field2)"/>{{ item.ObjectifLibelle }}</label>
                        </div>

                      </li>
                    </ul>
                  </div>
                </td>
                <td>
                  <button style="margin-right: 10px" class="btn btn-primary mb-2" type="button" (click)="addFieldValueFonc(fonctionFields,ff)">+</button>
                  <button type="submit" class="btn btn-primary mb-2">Valider</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </form>

      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end">
          <li class="page-item"><a class="page-link" routerLink ="/admin/creation/objectifs">Revenir aux <em>Objectifs</em></a></li>
          <li class="page-item"><a class="page-link" routerLink ="/admin/creation/solution">Passer aux <em>Solutions</em></a></li>
        </ul>
      </nav>
      <a class="scroll-to-top rounded" href="#page-top">
        <i class="fa fa-angle-up"></i>
      </a>
    </div>
  </div>
</body>
<router-outlet></router-outlet>
